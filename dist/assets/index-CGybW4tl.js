(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function f(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=f(n);fetch(n.href,s)}})();document.addEventListener("DOMContentLoaded",()=>{const h="arent",d=document.querySelector(".container"),f=document.getElementById("passwordModal"),a=document.getElementById("passwordInput"),n=document.getElementById("submitPassword");n.addEventListener("click",()=>{a.value===h?(f.style.display="none",d.style.display="block"):(alert("パスワードが正しくありません"),a.value="")}),a.addEventListener("keypress",t=>{t.key==="Enter"&&n.click()});const s=document.getElementById("titleInput"),i=document.getElementById("descriptionInput"),E=document.getElementById("priorityInput"),y=document.getElementById("dateInput"),I=document.getElementById("addTask"),v=document.getElementById("taskList"),k=document.querySelectorAll(".filter-btn"),L=document.getElementById("sortByDate"),m=new Date;m.setDate(m.getDate()+1),y.valueAsDate=m;let c=JSON.parse(localStorage.getItem("tasks"))||[];function g(){localStorage.setItem("tasks",JSON.stringify(c))}function b(t){if(!t)return"";const r=new Date,o=new Date(t),e=Math.ceil((o-r)/(1e3*60*60*24));return e<0?"overdue":e===0?"due-today":e<=3?"due-soon":""}function B(t){return`priority-${t}`}function w(t){return t?new Date(t).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):""}function l(t="all",r=!1){if(!v)return;v.innerHTML="";let o=c;t==="active"?o=c.filter(e=>!e.completed):t==="completed"&&(o=c.filter(e=>e.completed)),r&&o.sort((e,u)=>e.dueDate?u.dueDate?new Date(e.dueDate)-new Date(u.dueDate):-1:1),o.forEach((e,u)=>{const p=document.createElement("li"),O=b(e.dueDate),S=B(e.priority);p.className=`task-item ${e.completed?"completed":""} ${O} ${S}`,p.innerHTML=`
                <div class="task-header">
                    <label class="checkbox-label">
                        <input type="checkbox" class="task-checkbox" ${e.completed?"checked":""}>
                        <span class="checkmark"></span>
                        完了
                    </label>
                    <span class="task-title">${e.title}</span>
                    <span class="priority-badge">${e.priority==="high"?"高":e.priority==="medium"?"中":"低"}</span>
                </div>
                <div class="task-body">
                    <p class="task-description">${e.description}</p>
                    <span class="due-date">${w(e.dueDate)}</span>
                </div>
                <button class="delete-btn">削除</button>
            `;const D=p.querySelector(".task-checkbox");D.addEventListener("change",()=>{c[u].completed=D.checked,g(),l(t,r)}),p.querySelector(".delete-btn").addEventListener("click",()=>{c.splice(u,1),g(),l(t,r)}),v.appendChild(p)})}I.addEventListener("click",()=>{const t=s.value.trim(),r=i.value.trim(),o=E.value,e=y.value;t&&(c.push({title:t,description:r,priority:o,dueDate:e,completed:!1}),g(),l(),s.value="",i.value="",E.value="low",y.valueAsDate=m)}),k.forEach(t=>{t.addEventListener("click",()=>{k.forEach(r=>r.classList.remove("active")),t.classList.add("active"),l(t.dataset.filter)})}),L.addEventListener("click",()=>{l("all",!0)}),l()});
